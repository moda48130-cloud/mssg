<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <title>Mock Dashboard - Moda</title>
    <style>
        body {
            font-family: sans-serif;
            background: #111;
            color: #fff;
            text-align: center;
            padding: 40px;
        }
        
        .box {
            margin: 20px auto;
            padding: 20px;
            background: #222;
            border-radius: 8px;
            width: 300px;
        }
        
        .label {
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        
        .value {
            font-size: 2em;
            font-weight: bold;
            color: #0f0;
        }
        
        .timestamp {
            font-size: 0.9em;
            color: #ccc;
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <div class="box">
        <div class="label">ผู้เล่นออนไลน์</div>
        <div id="online-count" class="value">กำลังโหลด...</div>
        <div id="online-time" class="timestamp"></div>
    </div>

    <div class="box">
        <div class="label">ยอดแจ็กพอต</div>
        <div id="jackpot-amount" class="value">กำลังโหลด...</div>
        <div id="jackpot-time" class="timestamp"></div>
    </div>

    <script>
        function formatTime() {
            const now = new Date();
            return now.toLocaleString('th-TH', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                day: '2-digit',
                month: 'short',
                year: 'numeric'
            });
        }

        function fetchData() {
            Promise.all([
                    fetch('https://moda48130-cloud.github.io/mssg/mock_online.json').then(res => res.json()),
                    fetch('https://moda48130-cloud.github.io/mssg/mock_jackpot.json').then(res => res.json())
                ])
                .then(([onlineData, jackpotData]) => {
                    const onlineCountElement = document.getElementById('online-count');
                    const jackpotAmountElement = document.getElementById('jackpot-amount');
                    const onlineTimeElement = document.getElementById('online-time');
                    const jackpotTimeElement = document.getElementById('jackpot-time');

                    if (onlineCountElement && onlineData.online) {
                        onlineCountElement.textContent = onlineData.online;
                        onlineTimeElement.textContent = 'อัปเดตล่าสุด: ' + formatTime();
                    }

                    if (jackpotAmountElement && jackpotData.jackpot) {
                        jackpotAmountElement.textContent = jackpotData.jackpot.toLocaleString('en-US');
                        jackpotTimeElement.textContent = 'อัปเดตล่าสุด: ' + formatTime();
                    }
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                    document.getElementById('online-count').textContent = 'N/A';
                    document.getElementById('jackpot-amount').textContent = 'N/A';
                });
        }

        fetchData();
        setInterval(fetchData, 10000);
    </script>
</body>

</html>